<!-- frontend/pages/mindmap.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>StudyBloom - Mind Map</title>
    <!-- Global Styles -->
    <link rel="stylesheet" href="../css/main.css" />
    <!-- Page-Specific Styles -->
    <link rel="stylesheet" href="../css/mindmap.css" />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <body>
    <div class="dashboard-container">
      <!-- This will be replaced with the shared sidebar -->
      <div id="sidebar-placeholder"></div>

      <!-- Mind Map-specific content will be injected here -->
      <script type="text/template" id="page-content">
        <!-- Header -->
        <header class="header">
          <button class="menu-toggle">
            <i class="fas fa-bars"></i>
          </button>
          <h1>Mind Map</h1>
          <a href="#" class="logout-btn">Log out</a>
        </header>

        <!-- Welcome Message -->
        <div class="welcome-section">
          <h2>Hello, <span id="username">taca</span>!</h2>
        </div>

        <!-- Mind Map Section -->
        <div class="mindmap-section">
          <div class="mindmap-header">
            <button class="back-to-summary-btn">
              <i class="fas fa-arrow-left"></i> Back to Summary
            </button>
            <div class="mindmap-actions">
              <button class="mindmap-btn save-btn" id="saveMindMapBtn">
                <i class="fas fa-save"></i> Save
              </button>
              <button class="mindmap-btn export-btn" id="exportPdfBtn">
                <i class="fas fa-file-pdf"></i> Export PDF
              </button>
            </div>
          </div>

          <!-- Mind Map Canvas -->
          <div class="mindmap-container">
            <div class="mindmap-canvas">
              <!-- Future mind map will be rendered here -->
            </div>
          </div>

          <!-- Export Success Modal -->
          <div class="modal" id="exportSuccessModal" style="display: none;">
            <div class="modal-content" style="max-width: 400px;">
              <span class="close-modal" id="closeExportModal">&times;</span>
              <div class="modal-header" style="text-align: center; border-bottom: none;">
                <h3>Export Successful!</h3>
              </div>
              <div class="modal-body">
                <div class="success-icon" style="text-align: center; margin-bottom: 20px;">
                  <i class="fas fa-check-circle" style="font-size: 50px; color: #22c55e;"></i>
                </div>
                <p style="text-align: center; font-size: 1.1em; color: #4b5563;">Your mind map has been successfully exported as a PDF.</p>
              </div>
              <div class="modal-actions" style="display: flex; justify-content: center; margin-top: 20px; padding: 0;">
                <button class="mindmap-btn save-btn" id="exportOkBtn" style="min-width: 120px; margin: 0; justify-content: center;">OK</button>
              </div>
            </div>
          </div>

          <!-- Save Mind Map Modal -->
          <div class="modal" id="saveMindMapModal" style="display: none;">
            <div class="modal-content" style="max-width: 400px;">
              <span class="close-modal" id="closeSaveModal">&times;</span>
              <div class="modal-header" style="text-align: center; border-bottom: none;">
                <h3 id="saveModalTitle">Save Mind Map</h3>
              </div>
              <div class="modal-body">
                <div class="form-group">
                  <label for="mindmapTitleInput" style="display: block; margin-bottom: 8px; font-weight: 500; text-align: left;">Title</label>
                  <input type="text" id="mindmapTitleInput" placeholder="Enter mind map title">
                </div>
              </div>
              <div class="modal-actions" style="display: flex; justify-content: center; gap: 15px; margin-top: 20px; padding: 0;">
                 <button class="mindmap-btn" id="cancelSaveBtn" style="background-color: #6b7280; justify-content: center; min-width: 100px;">Cancel</button>
                 <button class="mindmap-btn save-btn" id="confirmSaveBtn" style="justify-content: center; min-width: 100px;">Save</button>
              </div>
            </div>
          </div>

          <!-- Save Success Modal -->
          <div class="modal" id="saveSuccessModal" style="display: none;">
            <div class="modal-content" style="max-width: 400px;">
              <span class="close-modal" id="closeSaveSuccessModal">&times;</span>
              <div class="modal-header" style="text-align: center; border-bottom: none;">
                <h3>Success!</h3>
              </div>
              <div class="modal-body">
                <div class="success-icon" style="text-align: center; margin-bottom: 20px;">
                  <i class="fas fa-check-circle" style="font-size: 50px; color: #22c55e;"></i>
                </div>
                <p style="text-align: center; font-size: 1.1em; color: #4b5563;">Your mind map has been saved successfully.</p>
              </div>
              <div class="modal-actions" style="display: flex; justify-content: center; margin-top: 20px; padding: 0;">
                <button class="mindmap-btn save-btn" id="saveOkBtn" style="min-width: 120px; margin: 0; justify-content: center;">OK</button>
              </div>
            </div>
          </div>
        </div>
      </script>
    </div>

    <!-- Configuration -->
    <script src="../js/config.js"></script>
    <!-- Shared JS -->
    <script src="../js/main.js"></script>
    <!-- D3.js library for visualization -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <!-- html2canvas and jspdf for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- Page-Specific JS -->
    <script src="../js/mindmap.js"></script>
  </body>
</html>
